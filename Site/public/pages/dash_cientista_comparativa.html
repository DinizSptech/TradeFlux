<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link
      href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
      integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />

    <link rel="stylesheet" href="../css/barra_lateral.css" />
    <link rel="stylesheet" href="../css/dashComparativa.css" />

    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
    <script src="../js/barra_lateral.js" defer></script>
    <script src="../js/dashComparativa.js" defer></script>

    <title>Dashboard comparativa</title>
  </head>
  <body onload="carregarMenuLateral(); geradorGraficos('Barra'); gerarBotao(); inicializarDashboard(); gerarBotao();">
    <main>
      <div class="navbar">
        <i onclick="mudarIcone()" id="menu-bar">&#9776;</i>
        <div class="container_perfil_menu" id="modal_perfil">
          <i class="fa-solid fa-bell" onclick="abrirModal('notificacoes')"></i>
          <span class="barraVertical"></span>
          <div class="button_perfil_nav_bar" onclick="abrirModal('perfil')">
            <img
              class="imgPerfil"
              id="rogerioCientista2"
              style="display: none; border-radius: 50%"
              src="../assets/icons_protopersonas/rogerioCientista.png"
              alt=""
              height="80"
            />
            <img
              class="imgPerfil"
              id="jenniferADM2"
              style="display: none; border-radius: 50%"
              src="../assets/icons_protopersonas/jenniferADM.png"
              alt=""
              height="80"
            />
            <img
              class="imgPerfil"
              id="juliaAnalista2"
              style="display: none; border-radius: 50%"
              src="../assets/icons_protopersonas/juliaAnalista.png"
              alt=""
              height="80"
            />
            <i class="fa-solid fa-chevron-down"></i>
          </div>
        </div>
      </div>
      <div id="barralateral" class="barra-lateral"></div>

      <header>
        <div class="filter-container">
          <div class="filter-row">
            <select class="select-field" id="mainSelect">
              <option value="CPU">- Servidor com maior utilização de CPU -</option>
              <option value="RAM">
                - Servidor com maior utilização de RAM -
              </option>
              <option value="Disco">
                - Servidor com maior utilização de Disco -
              </option>
              <option value="Personalizado">- Servidor específico - </option>
            </select>

            <select class="hidden-select" id="hiddenSelect">
              <option value="#" selected disabled>Selecione um:</option>
              <option value="1">Servidor 1</option>
              <option value="2">Servidor 2</option>
              <option value="3">Servidor 3</option>
              <option value="4">Servidor 4</option>
              <option value="5">Servidor 5</option>
              <option value="6">Servidor 6</option>
              <option value="7">Servidor 7</option>
              <option value="8">Servidor 8</option>
              <option value="9">Servidor 9</option>
              <option value="10">Servidor 10</option>
            </select>

            <div class="divDatas">
              <select class="select-field" name="tempo" id="sltPeriodo">
                <option value="optPeriodo7Dias" selected>Últimos 7 dias</option>
                <option value="optPeriodo30Dias">Últimos 30 dias</option>
                <option value="optPeriodo3Meses">Últimos 3 meses</option>
                <option value="optPeriodoPersonalizado">Personalizado</option>
              </select>

              <div
                class="divPersonalizadaData esconder"
                id="divPersonalizadaData"
              >
                <span>De</span>
                <input class="data-field" type="date" id="iptDateComeco" />

                <span>Até</span>
                <input class="data-field" type="date" id="iptDateFinal" />
              </div>
            </div>

            <div class="buttons-container">
              <button class="btn btn-filter" onclick="filtrar()">
                Filtrar
              </button>
              <button class="btn btn-clear" onclick="limparFiltro()">
                Limpar Filtro
              </button>
            </div>
          </div>
        </div>
      </header>

      <div id="myBarChart"></div>

      <div class="row-tabela">
        <div class="container-tabela">
          <div class="table-container">
            <h2 class="table-title">Top 5 processos</h2>
            <table id="processTable">
              <thead>
                <tr>
                  <th id="processHeader" onclick="sortTable('process')">
                    Processo
                  </th>
                  <th id="cpuHeader" onclick="sortTable('cpu')">CPU</th>
                  <th id="ramHeader" onclick="sortTable('ram')">RAM</th>
                </tr>
              </thead>
              <tbody id="tableBody">
                <!-- Conteúdo será gerado pelo JavaScript -->
              </tbody>
            </table>
            <div class="sort-info">
              Clique nas colunas para ordenar do maior ao menor
            </div>
            <div class="button-container">
              <button class="action-btn secondary" onclick="exportData()">
                Exportar CSV dos processos
              </button>
            </div>
          </div>
          <!-- Versão atual com texto -->
        </div>

        <div class="action-buttons">
          <button class="open-modal-btn" onclick="openModal()">
            Comparar com outro servidor
          </button>
          <button
            class="open-modal-btn"
            id="botaoBaixar"
            onclick="baixarCSV()"
          ></button>
        </div>
      </div>

      <div id="modal" class="modal" onclick="closeModalOnBackdrop(event)">
        <div class="modal-content">
          <div class="modal-header">
            <h2 class="modal-title">Gráfico de linha comparativo</h2>
            <button class="close-btn" onclick="closeModal()">&times;</button>
          </div>
          <div class="modal-body">
            <div id="myLineChart"></div>
            <select name="serverSlt" id="sltServidor2">
              <option value="#" selected disabled>Selecione um:</option>
              <option value="optServidor1">Servidor 1</option>
              <option value="optServidor2">Servidor 2</option>
              <option value="optServidor3">Servidor 3</option>
              <option value="optServidor4">Servidor 4</option>
              <option value="optServidor5">Servidor 5</option>
              <option value="optServidor6">Servidor 6</option>
              <option value="optServidor7">Servidor 7</option>
              <option value="optServidor8">Servidor 8</option>
              <option value="optServidor9">Servidor 9</option>
              <option value="optServidor10">Servidor 10</option>
            </select>
            <div id="myLineChart2"></div>
          </div>
          <div class="modal-footer">
            <button class="btn btn-secondary" onclick="closeModal()">
              Fechar
            </button>
            <button class="btn btn-primary" onclick="handleAction()">
              Confirmar
            </button>
          </div>
        </div>
      </div>
    </main>
  </body>
</html>